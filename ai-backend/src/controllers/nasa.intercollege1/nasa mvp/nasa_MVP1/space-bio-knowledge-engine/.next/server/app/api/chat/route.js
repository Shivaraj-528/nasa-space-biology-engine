"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/chat/route";
exports.ids = ["app/api/chat/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "string_decoder":
/*!*********************************!*\
  !*** external "string_decoder" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("string_decoder");

/***/ }),

/***/ "timers":
/*!*************************!*\
  !*** external "timers" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("timers");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fchat%2Froute&page=%2Fapi%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Froute.ts&appDir=%2FUsers%2Fyelugodlashivaraj%2FCascadeProjects%2Fnasa-space-biology-engine%2Fai-backend%2Fsrc%2Fcontrollers%2Fnasa.intercollege1%2Fnasa%20mvp%2Fnasa_MVP1%2Fspace-bio-knowledge-engine%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fyelugodlashivaraj%2FCascadeProjects%2Fnasa-space-biology-engine%2Fai-backend%2Fsrc%2Fcontrollers%2Fnasa.intercollege1%2Fnasa%20mvp%2Fnasa_MVP1%2Fspace-bio-knowledge-engine&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fchat%2Froute&page=%2Fapi%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Froute.ts&appDir=%2FUsers%2Fyelugodlashivaraj%2FCascadeProjects%2Fnasa-space-biology-engine%2Fai-backend%2Fsrc%2Fcontrollers%2Fnasa.intercollege1%2Fnasa%20mvp%2Fnasa_MVP1%2Fspace-bio-knowledge-engine%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fyelugodlashivaraj%2FCascadeProjects%2Fnasa-space-biology-engine%2Fai-backend%2Fsrc%2Fcontrollers%2Fnasa.intercollege1%2Fnasa%20mvp%2Fnasa_MVP1%2Fspace-bio-knowledge-engine&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_yelugodlashivaraj_CascadeProjects_nasa_space_biology_engine_ai_backend_src_controllers_nasa_intercollege1_nasa_mvp_nasa_MVP1_space_bio_knowledge_engine_src_app_api_chat_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/chat/route.ts */ \"(rsc)/./src/app/api/chat/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/chat/route\",\n        pathname: \"/api/chat\",\n        filename: \"route\",\n        bundlePath: \"app/api/chat/route\"\n    },\n    resolvedPagePath: \"/Users/yelugodlashivaraj/CascadeProjects/nasa-space-biology-engine/ai-backend/src/controllers/nasa.intercollege1/nasa mvp/nasa_MVP1/space-bio-knowledge-engine/src/app/api/chat/route.ts\",\n    nextConfigOutput,\n    userland: _Users_yelugodlashivaraj_CascadeProjects_nasa_space_biology_engine_ai_backend_src_controllers_nasa_intercollege1_nasa_mvp_nasa_MVP1_space_bio_knowledge_engine_src_app_api_chat_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/chat/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZjaGF0JTJGcm91dGUmcGFnZT0lMkZhcGklMkZjaGF0JTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGY2hhdCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnllbHVnb2RsYXNoaXZhcmFqJTJGQ2FzY2FkZVByb2plY3RzJTJGbmFzYS1zcGFjZS1iaW9sb2d5LWVuZ2luZSUyRmFpLWJhY2tlbmQlMkZzcmMlMkZjb250cm9sbGVycyUyRm5hc2EuaW50ZXJjb2xsZWdlMSUyRm5hc2ElMjBtdnAlMkZuYXNhX01WUDElMkZzcGFjZS1iaW8ta25vd2xlZGdlLWVuZ2luZSUyRnNyYyUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZ5ZWx1Z29kbGFzaGl2YXJhaiUyRkNhc2NhZGVQcm9qZWN0cyUyRm5hc2Etc3BhY2UtYmlvbG9neS1lbmdpbmUlMkZhaS1iYWNrZW5kJTJGc3JjJTJGY29udHJvbGxlcnMlMkZuYXNhLmludGVyY29sbGVnZTElMkZuYXNhJTIwbXZwJTJGbmFzYV9NVlAxJTJGc3BhY2UtYmlvLWtub3dsZWRnZS1lbmdpbmUmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ3dJO0FBQ3JOO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3BhY2UtYmlvLWtub3dsZWRnZS1lbmdpbmUvP2UzZDQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL3llbHVnb2RsYXNoaXZhcmFqL0Nhc2NhZGVQcm9qZWN0cy9uYXNhLXNwYWNlLWJpb2xvZ3ktZW5naW5lL2FpLWJhY2tlbmQvc3JjL2NvbnRyb2xsZXJzL25hc2EuaW50ZXJjb2xsZWdlMS9uYXNhIG12cC9uYXNhX01WUDEvc3BhY2UtYmlvLWtub3dsZWRnZS1lbmdpbmUvc3JjL2FwcC9hcGkvY2hhdC9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvY2hhdC9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2NoYXRcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2NoYXQvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMveWVsdWdvZGxhc2hpdmFyYWovQ2FzY2FkZVByb2plY3RzL25hc2Etc3BhY2UtYmlvbG9neS1lbmdpbmUvYWktYmFja2VuZC9zcmMvY29udHJvbGxlcnMvbmFzYS5pbnRlcmNvbGxlZ2UxL25hc2EgbXZwL25hc2FfTVZQMS9zcGFjZS1iaW8ta25vd2xlZGdlLWVuZ2luZS9zcmMvYXBwL2FwaS9jaGF0L3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9jaGF0L3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fchat%2Froute&page=%2Fapi%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Froute.ts&appDir=%2FUsers%2Fyelugodlashivaraj%2FCascadeProjects%2Fnasa-space-biology-engine%2Fai-backend%2Fsrc%2Fcontrollers%2Fnasa.intercollege1%2Fnasa%20mvp%2Fnasa_MVP1%2Fspace-bio-knowledge-engine%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fyelugodlashivaraj%2FCascadeProjects%2Fnasa-space-biology-engine%2Fai-backend%2Fsrc%2Fcontrollers%2Fnasa.intercollege1%2Fnasa%20mvp%2Fnasa_MVP1%2Fspace-bio-knowledge-engine&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/chat/route.ts":
/*!***********************************!*\
  !*** ./src/app/api/chat/route.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   runtime: () => (/* binding */ runtime)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_rag_aggregate__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/rag/aggregate */ \"(rsc)/./src/lib/rag/aggregate.ts\");\n/* harmony import */ var _lib_openrouter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/openrouter */ \"(rsc)/./src/lib/openrouter.ts\");\n\n\n\nconst runtime = \"nodejs\";\nconst roleSystemMap = {\n    student: \"Explain in simple terms for a student. Focus on definitions and intuition.\",\n    teacher: \"Explain with educational context, analogies, and key takeaways.\",\n    researcher: \"Provide technical, multi-paper insights. Compare findings.\",\n    scientist: \"Provide deep technical analysis with precise references and methods.\"\n};\nasync function POST(req) {\n    const body = await req.json();\n    const question = body.question;\n    const role = body.role || \"student\";\n    const sources = body.sources || [\n        \"nasa\",\n        \"arxiv\",\n        \"pubmed\",\n        \"crossref\"\n    ];\n    const urls = body.urls;\n    const docs = await (0,_lib_rag_aggregate__WEBPACK_IMPORTED_MODULE_1__.aggregateSearch)(question, sources, 3, urls);\n    const context = docs.map((d, i)=>`[${i + 1}] ${d.title} (${d.source}) ${d.url || \"\"}\\n${(d.summary || d.snippet || \"\").slice(0, 800)}`).join(\"\\n\\n\");\n    const sys = {\n        role: \"system\",\n        content: `You are a space biology assistant. ${roleSystemMap[role] || \"\"} Cite sources as [n] matching the provided references.`\n    };\n    const user = {\n        role: \"user\",\n        content: `Question: ${question}\\n\\nContext sources:\\n${context}\\n\\nReturn an answer with citations like [1], [2]. Then list References as a numbered list with URLs.`\n    };\n    const { content } = await (0,_lib_openrouter__WEBPACK_IMPORTED_MODULE_2__.openrouterChat)([\n        sys,\n        user\n    ], undefined, 0.2);\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        answer: content,\n        references: docs.map((d, i)=>({\n                index: i + 1,\n                title: d.title,\n                url: d.url,\n                source: d.source\n            }))\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9jaGF0L3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXdEO0FBQ0Y7QUFDUztBQUV4RCxNQUFNRyxVQUFVLFNBQVM7QUFFaEMsTUFBTUMsZ0JBQXdDO0lBQzVDQyxTQUFTO0lBQ1RDLFNBQVM7SUFDVEMsWUFBWTtJQUNaQyxXQUFXO0FBQ2I7QUFFTyxlQUFlQyxLQUFLQyxHQUFnQjtJQUN6QyxNQUFNQyxPQUFPLE1BQU1ELElBQUlFLElBQUk7SUFDM0IsTUFBTUMsV0FBbUJGLEtBQUtFLFFBQVE7SUFDdEMsTUFBTUMsT0FBZUgsS0FBS0csSUFBSSxJQUFJO0lBQ2xDLE1BQU1DLFVBQW9CSixLQUFLSSxPQUFPLElBQUk7UUFBQztRQUFRO1FBQVM7UUFBVTtLQUFXO0lBQ2pGLE1BQU1DLE9BQTZCTCxLQUFLSyxJQUFJO0lBRTVDLE1BQU1DLE9BQU8sTUFBTWhCLG1FQUFlQSxDQUFDWSxVQUFVRSxTQUFnQixHQUFHQztJQUNoRSxNQUFNRSxVQUFVRCxLQUNiRSxHQUFHLENBQ0YsQ0FBQ0MsR0FBR0MsSUFBTSxDQUFDLENBQUMsRUFBRUEsSUFBSSxFQUFFLEVBQUUsRUFBRUQsRUFBRUUsS0FBSyxDQUFDLEVBQUUsRUFBRUYsRUFBRUcsTUFBTSxDQUFDLEVBQUUsRUFBRUgsRUFBRUksR0FBRyxJQUFJLEdBQUcsRUFBRSxFQUFFLENBQUNKLEVBQUVLLE9BQU8sSUFBSUwsRUFBRU0sT0FBTyxJQUFJLEVBQUMsRUFBR0MsS0FBSyxDQUFDLEdBQUcsS0FBSyxDQUFDLEVBRWhIQyxJQUFJLENBQUM7SUFFUixNQUFNQyxNQUFtQjtRQUN2QmYsTUFBTTtRQUNOZ0IsU0FBUyxDQUFDLG1DQUFtQyxFQUFFMUIsYUFBYSxDQUFDVSxLQUFLLElBQUksR0FBRyxzREFBc0QsQ0FBQztJQUNsSTtJQUNBLE1BQU1pQixPQUFvQjtRQUN4QmpCLE1BQU07UUFDTmdCLFNBQVMsQ0FBQyxVQUFVLEVBQUVqQixTQUFTLHNCQUFzQixFQUFFSyxRQUFRLHFHQUFxRyxDQUFDO0lBQ3ZLO0lBRUEsTUFBTSxFQUFFWSxPQUFPLEVBQUUsR0FBRyxNQUFNNUIsK0RBQWNBLENBQUM7UUFBQzJCO1FBQUtFO0tBQUssRUFBRUMsV0FBVztJQUNqRSxPQUFPaEMscURBQVlBLENBQUNZLElBQUksQ0FBQztRQUN2QnFCLFFBQVFIO1FBQ1JJLFlBQVlqQixLQUFLRSxHQUFHLENBQUMsQ0FBQ0MsR0FBR0MsSUFBTztnQkFBRWMsT0FBT2QsSUFBSTtnQkFBR0MsT0FBT0YsRUFBRUUsS0FBSztnQkFBRUUsS0FBS0osRUFBRUksR0FBRztnQkFBRUQsUUFBUUgsRUFBRUcsTUFBTTtZQUFDO0lBQy9GO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zcGFjZS1iaW8ta25vd2xlZGdlLWVuZ2luZS8uL3NyYy9hcHAvYXBpL2NoYXQvcm91dGUudHM/NDZiNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuaW1wb3J0IHsgYWdncmVnYXRlU2VhcmNoIH0gZnJvbSAnQC9saWIvcmFnL2FnZ3JlZ2F0ZSc7XG5pbXBvcnQgeyBvcGVucm91dGVyQ2hhdCwgQ2hhdE1lc3NhZ2UgfSBmcm9tICdAL2xpYi9vcGVucm91dGVyJztcblxuZXhwb3J0IGNvbnN0IHJ1bnRpbWUgPSAnbm9kZWpzJztcblxuY29uc3Qgcm9sZVN5c3RlbU1hcDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgc3R1ZGVudDogJ0V4cGxhaW4gaW4gc2ltcGxlIHRlcm1zIGZvciBhIHN0dWRlbnQuIEZvY3VzIG9uIGRlZmluaXRpb25zIGFuZCBpbnR1aXRpb24uJyxcbiAgdGVhY2hlcjogJ0V4cGxhaW4gd2l0aCBlZHVjYXRpb25hbCBjb250ZXh0LCBhbmFsb2dpZXMsIGFuZCBrZXkgdGFrZWF3YXlzLicsXG4gIHJlc2VhcmNoZXI6ICdQcm92aWRlIHRlY2huaWNhbCwgbXVsdGktcGFwZXIgaW5zaWdodHMuIENvbXBhcmUgZmluZGluZ3MuJyxcbiAgc2NpZW50aXN0OiAnUHJvdmlkZSBkZWVwIHRlY2huaWNhbCBhbmFseXNpcyB3aXRoIHByZWNpc2UgcmVmZXJlbmNlcyBhbmQgbWV0aG9kcy4nLFxufTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxOiBOZXh0UmVxdWVzdCkge1xuICBjb25zdCBib2R5ID0gYXdhaXQgcmVxLmpzb24oKTtcbiAgY29uc3QgcXVlc3Rpb246IHN0cmluZyA9IGJvZHkucXVlc3Rpb247XG4gIGNvbnN0IHJvbGU6IHN0cmluZyA9IGJvZHkucm9sZSB8fCAnc3R1ZGVudCc7XG4gIGNvbnN0IHNvdXJjZXM6IHN0cmluZ1tdID0gYm9keS5zb3VyY2VzIHx8IFsnbmFzYScsICdhcnhpdicsICdwdWJtZWQnLCAnY3Jvc3NyZWYnXTtcbiAgY29uc3QgdXJsczogc3RyaW5nW10gfCB1bmRlZmluZWQgPSBib2R5LnVybHM7XG5cbiAgY29uc3QgZG9jcyA9IGF3YWl0IGFnZ3JlZ2F0ZVNlYXJjaChxdWVzdGlvbiwgc291cmNlcyBhcyBhbnksIDMsIHVybHMpO1xuICBjb25zdCBjb250ZXh0ID0gZG9jc1xuICAgIC5tYXAoXG4gICAgICAoZCwgaSkgPT4gYFske2kgKyAxfV0gJHtkLnRpdGxlfSAoJHtkLnNvdXJjZX0pICR7ZC51cmwgfHwgJyd9XFxuJHsoZC5zdW1tYXJ5IHx8IGQuc25pcHBldCB8fCAnJykuc2xpY2UoMCwgODAwKX1gXG4gICAgKVxuICAgIC5qb2luKCdcXG5cXG4nKTtcblxuICBjb25zdCBzeXM6IENoYXRNZXNzYWdlID0ge1xuICAgIHJvbGU6ICdzeXN0ZW0nLFxuICAgIGNvbnRlbnQ6IGBZb3UgYXJlIGEgc3BhY2UgYmlvbG9neSBhc3Npc3RhbnQuICR7cm9sZVN5c3RlbU1hcFtyb2xlXSB8fCAnJ30gQ2l0ZSBzb3VyY2VzIGFzIFtuXSBtYXRjaGluZyB0aGUgcHJvdmlkZWQgcmVmZXJlbmNlcy5gLFxuICB9O1xuICBjb25zdCB1c2VyOiBDaGF0TWVzc2FnZSA9IHtcbiAgICByb2xlOiAndXNlcicsXG4gICAgY29udGVudDogYFF1ZXN0aW9uOiAke3F1ZXN0aW9ufVxcblxcbkNvbnRleHQgc291cmNlczpcXG4ke2NvbnRleHR9XFxuXFxuUmV0dXJuIGFuIGFuc3dlciB3aXRoIGNpdGF0aW9ucyBsaWtlIFsxXSwgWzJdLiBUaGVuIGxpc3QgUmVmZXJlbmNlcyBhcyBhIG51bWJlcmVkIGxpc3Qgd2l0aCBVUkxzLmAsXG4gIH07XG5cbiAgY29uc3QgeyBjb250ZW50IH0gPSBhd2FpdCBvcGVucm91dGVyQ2hhdChbc3lzLCB1c2VyXSwgdW5kZWZpbmVkLCAwLjIpO1xuICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgIGFuc3dlcjogY29udGVudCxcbiAgICByZWZlcmVuY2VzOiBkb2NzLm1hcCgoZCwgaSkgPT4gKHsgaW5kZXg6IGkgKyAxLCB0aXRsZTogZC50aXRsZSwgdXJsOiBkLnVybCwgc291cmNlOiBkLnNvdXJjZSB9KSksXG4gIH0pO1xufVxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImFnZ3JlZ2F0ZVNlYXJjaCIsIm9wZW5yb3V0ZXJDaGF0IiwicnVudGltZSIsInJvbGVTeXN0ZW1NYXAiLCJzdHVkZW50IiwidGVhY2hlciIsInJlc2VhcmNoZXIiLCJzY2llbnRpc3QiLCJQT1NUIiwicmVxIiwiYm9keSIsImpzb24iLCJxdWVzdGlvbiIsInJvbGUiLCJzb3VyY2VzIiwidXJscyIsImRvY3MiLCJjb250ZXh0IiwibWFwIiwiZCIsImkiLCJ0aXRsZSIsInNvdXJjZSIsInVybCIsInN1bW1hcnkiLCJzbmlwcGV0Iiwic2xpY2UiLCJqb2luIiwic3lzIiwiY29udGVudCIsInVzZXIiLCJ1bmRlZmluZWQiLCJhbnN3ZXIiLCJyZWZlcmVuY2VzIiwiaW5kZXgiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/chat/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/openrouter.ts":
/*!*******************************!*\
  !*** ./src/lib/openrouter.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   openrouterChat: () => (/* binding */ openrouterChat)\n/* harmony export */ });\nasync function openrouterChat(messages, model, temperature = 0.2) {\n    const apiKey = process.env.OPENROUTER_API_KEY;\n    if (!apiKey) throw new Error(\"OPENROUTER_API_KEY missing\");\n    const selectedModel = model || process.env.OPENROUTER_MODEL || \"openai/gpt-4o-mini\";\n    const referer = process.env.OPENROUTER_REFERRER || \"http://localhost:3000\";\n    const res = await fetch(\"https://openrouter.ai/api/v1/chat/completions\", {\n        method: \"POST\",\n        headers: {\n            Authorization: `Bearer ${apiKey}`,\n            \"HTTP-Referer\": referer,\n            \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n            model: selectedModel,\n            messages,\n            temperature\n        })\n    });\n    if (!res.ok) {\n        const txt = await res.text();\n        throw new Error(`OpenRouter error ${res.status}: ${txt}`);\n    }\n    const data = await res.json();\n    const content = data?.choices?.[0]?.message?.content ?? \"\";\n    return {\n        content,\n        raw: data\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL29wZW5yb3V0ZXIudHMiLCJtYXBwaW5ncyI6Ijs7OztBQUVPLGVBQWVBLGVBQWVDLFFBQXVCLEVBQUVDLEtBQWMsRUFBRUMsY0FBYyxHQUFHO0lBQzdGLE1BQU1DLFNBQVNDLFFBQVFDLEdBQUcsQ0FBQ0Msa0JBQWtCO0lBQzdDLElBQUksQ0FBQ0gsUUFBUSxNQUFNLElBQUlJLE1BQU07SUFDN0IsTUFBTUMsZ0JBQWdCUCxTQUFTRyxRQUFRQyxHQUFHLENBQUNJLGdCQUFnQixJQUFJO0lBQy9ELE1BQU1DLFVBQVVOLFFBQVFDLEdBQUcsQ0FBQ00sbUJBQW1CLElBQUk7SUFFbkQsTUFBTUMsTUFBTSxNQUFNQyxNQUFNLGlEQUFpRDtRQUN2RUMsUUFBUTtRQUNSQyxTQUFTO1lBQ1BDLGVBQWUsQ0FBQyxPQUFPLEVBQUViLE9BQU8sQ0FBQztZQUNqQyxnQkFBZ0JPO1lBQ2hCLGdCQUFnQjtRQUNsQjtRQUNBTyxNQUFNQyxLQUFLQyxTQUFTLENBQUM7WUFDbkJsQixPQUFPTztZQUNQUjtZQUNBRTtRQUNGO0lBQ0Y7SUFDQSxJQUFJLENBQUNVLElBQUlRLEVBQUUsRUFBRTtRQUNYLE1BQU1DLE1BQU0sTUFBTVQsSUFBSVUsSUFBSTtRQUMxQixNQUFNLElBQUlmLE1BQU0sQ0FBQyxpQkFBaUIsRUFBRUssSUFBSVcsTUFBTSxDQUFDLEVBQUUsRUFBRUYsSUFBSSxDQUFDO0lBQzFEO0lBQ0EsTUFBTUcsT0FBTyxNQUFNWixJQUFJYSxJQUFJO0lBQzNCLE1BQU1DLFVBQVVGLE1BQU1HLFNBQVMsQ0FBQyxFQUFFLEVBQUVDLFNBQVNGLFdBQVc7SUFDeEQsT0FBTztRQUFFQTtRQUFTRyxLQUFLTDtJQUFLO0FBQzlCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3BhY2UtYmlvLWtub3dsZWRnZS1lbmdpbmUvLi9zcmMvbGliL29wZW5yb3V0ZXIudHM/Mzc5YSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgdHlwZSBDaGF0TWVzc2FnZSA9IHsgcm9sZTogJ3N5c3RlbScgfCAndXNlcicgfCAnYXNzaXN0YW50JzsgY29udGVudDogc3RyaW5nIH07XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBvcGVucm91dGVyQ2hhdChtZXNzYWdlczogQ2hhdE1lc3NhZ2VbXSwgbW9kZWw/OiBzdHJpbmcsIHRlbXBlcmF0dXJlID0gMC4yKSB7XG4gIGNvbnN0IGFwaUtleSA9IHByb2Nlc3MuZW52Lk9QRU5ST1VURVJfQVBJX0tFWTtcbiAgaWYgKCFhcGlLZXkpIHRocm93IG5ldyBFcnJvcignT1BFTlJPVVRFUl9BUElfS0VZIG1pc3NpbmcnKTtcbiAgY29uc3Qgc2VsZWN0ZWRNb2RlbCA9IG1vZGVsIHx8IHByb2Nlc3MuZW52Lk9QRU5ST1VURVJfTU9ERUwgfHwgJ29wZW5haS9ncHQtNG8tbWluaSc7XG4gIGNvbnN0IHJlZmVyZXIgPSBwcm9jZXNzLmVudi5PUEVOUk9VVEVSX1JFRkVSUkVSIHx8ICdodHRwOi8vbG9jYWxob3N0OjMwMDAnO1xuXG4gIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL29wZW5yb3V0ZXIuYWkvYXBpL3YxL2NoYXQvY29tcGxldGlvbnMnLCB7XG4gICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgaGVhZGVyczoge1xuICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2FwaUtleX1gLFxuICAgICAgJ0hUVFAtUmVmZXJlcic6IHJlZmVyZXIsXG4gICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgIH0sXG4gICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgbW9kZWw6IHNlbGVjdGVkTW9kZWwsXG4gICAgICBtZXNzYWdlcyxcbiAgICAgIHRlbXBlcmF0dXJlLFxuICAgIH0pLFxuICB9KTtcbiAgaWYgKCFyZXMub2spIHtcbiAgICBjb25zdCB0eHQgPSBhd2FpdCByZXMudGV4dCgpO1xuICAgIHRocm93IG5ldyBFcnJvcihgT3BlblJvdXRlciBlcnJvciAke3Jlcy5zdGF0dXN9OiAke3R4dH1gKTtcbiAgfVxuICBjb25zdCBkYXRhID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgY29uc3QgY29udGVudCA9IGRhdGE/LmNob2ljZXM/LlswXT8ubWVzc2FnZT8uY29udGVudCA/PyAnJztcbiAgcmV0dXJuIHsgY29udGVudCwgcmF3OiBkYXRhIH07XG59XG4iXSwibmFtZXMiOlsib3BlbnJvdXRlckNoYXQiLCJtZXNzYWdlcyIsIm1vZGVsIiwidGVtcGVyYXR1cmUiLCJhcGlLZXkiLCJwcm9jZXNzIiwiZW52IiwiT1BFTlJPVVRFUl9BUElfS0VZIiwiRXJyb3IiLCJzZWxlY3RlZE1vZGVsIiwiT1BFTlJPVVRFUl9NT0RFTCIsInJlZmVyZXIiLCJPUEVOUk9VVEVSX1JFRkVSUkVSIiwicmVzIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwiQXV0aG9yaXphdGlvbiIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5Iiwib2siLCJ0eHQiLCJ0ZXh0Iiwic3RhdHVzIiwiZGF0YSIsImpzb24iLCJjb250ZW50IiwiY2hvaWNlcyIsIm1lc3NhZ2UiLCJyYXciXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/openrouter.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/rag/aggregate.ts":
/*!**********************************!*\
  !*** ./src/lib/rag/aggregate.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   aggregateSearch: () => (/* binding */ aggregateSearch)\n/* harmony export */ });\n/* harmony import */ var _arxiv__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./arxiv */ \"(rsc)/./src/lib/rag/arxiv.ts\");\n/* harmony import */ var _pubmed__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./pubmed */ \"(rsc)/./src/lib/rag/pubmed.ts\");\n/* harmony import */ var _crossref__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./crossref */ \"(rsc)/./src/lib/rag/crossref.ts\");\n/* harmony import */ var _nasa__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./nasa */ \"(rsc)/./src/lib/rag/nasa.ts\");\n\n\n\n\nfunction stripHtml(html) {\n    return html.replace(/<[^>]*>/g, \" \");\n}\nasync function aggregateSearch(query, sources, maxPerSource = 3, urls) {\n    const tasks = [];\n    if (sources.includes(\"nasa\")) tasks.push((0,_nasa__WEBPACK_IMPORTED_MODULE_3__.searchNasa)(query, maxPerSource));\n    if (sources.includes(\"arxiv\")) tasks.push((0,_arxiv__WEBPACK_IMPORTED_MODULE_0__.searchArxiv)(query, maxPerSource));\n    if (sources.includes(\"pubmed\")) tasks.push((0,_pubmed__WEBPACK_IMPORTED_MODULE_1__.searchPubMed)(query, maxPerSource));\n    if (sources.includes(\"crossref\")) tasks.push((0,_crossref__WEBPACK_IMPORTED_MODULE_2__.searchCrossRef)(query, maxPerSource));\n    const results = (await Promise.allSettled(tasks)).flatMap((r)=>r.status === \"fulfilled\" ? r.value : []);\n    let urlDocs = [];\n    if (sources.includes(\"url\") && urls?.length) {\n        const urlRes = await Promise.allSettled(urls.map(async (u)=>{\n            const r = await fetch(u);\n            const t = await r.text();\n            const snip = stripHtml(t).slice(0, 1000);\n            return {\n                title: u,\n                url: u,\n                summary: snip,\n                source: \"url\"\n            };\n        }));\n        urlDocs = urlRes.flatMap((r)=>r.status === \"fulfilled\" ? [\n                r.value\n            ] : []);\n    }\n    return [\n        ...results,\n        ...urlDocs\n    ];\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3JhZy9hZ2dyZWdhdGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBc0M7QUFDRTtBQUNJO0FBQ1I7QUFHcEMsU0FBU0ksVUFBVUMsSUFBWTtJQUM3QixPQUFPQSxLQUFLQyxPQUFPLENBQUMsWUFBWTtBQUNsQztBQUVPLGVBQWVDLGdCQUNwQkMsS0FBYSxFQUNiQyxPQUFnRSxFQUNoRUMsZUFBZSxDQUFDLEVBQ2hCQyxJQUFlO0lBRWYsTUFBTUMsUUFBNkIsRUFBRTtJQUNyQyxJQUFJSCxRQUFRSSxRQUFRLENBQUMsU0FBU0QsTUFBTUUsSUFBSSxDQUFDWCxpREFBVUEsQ0FBQ0ssT0FBT0U7SUFDM0QsSUFBSUQsUUFBUUksUUFBUSxDQUFDLFVBQVVELE1BQU1FLElBQUksQ0FBQ2QsbURBQVdBLENBQUNRLE9BQU9FO0lBQzdELElBQUlELFFBQVFJLFFBQVEsQ0FBQyxXQUFXRCxNQUFNRSxJQUFJLENBQUNiLHFEQUFZQSxDQUFDTyxPQUFPRTtJQUMvRCxJQUFJRCxRQUFRSSxRQUFRLENBQUMsYUFBYUQsTUFBTUUsSUFBSSxDQUFDWix5REFBY0EsQ0FBQ00sT0FBT0U7SUFDbkUsTUFBTUssVUFBVSxDQUFDLE1BQU1DLFFBQVFDLFVBQVUsQ0FBQ0wsTUFBSyxFQUFHTSxPQUFPLENBQUMsQ0FBQ0MsSUFBT0EsRUFBRUMsTUFBTSxLQUFLLGNBQWNELEVBQUVFLEtBQUssR0FBRyxFQUFFO0lBQ3pHLElBQUlDLFVBQW9CLEVBQUU7SUFDMUIsSUFBSWIsUUFBUUksUUFBUSxDQUFDLFVBQVVGLE1BQU1ZLFFBQVE7UUFDM0MsTUFBTUMsU0FBUyxNQUFNUixRQUFRQyxVQUFVLENBQ3JDTixLQUFLYyxHQUFHLENBQUMsT0FBT0M7WUFDZCxNQUFNUCxJQUFJLE1BQU1RLE1BQU1EO1lBQ3RCLE1BQU1FLElBQUksTUFBTVQsRUFBRVUsSUFBSTtZQUN0QixNQUFNQyxPQUFPMUIsVUFBVXdCLEdBQUdHLEtBQUssQ0FBQyxHQUFHO1lBQ25DLE9BQU87Z0JBQUVDLE9BQU9OO2dCQUFHTyxLQUFLUDtnQkFBR1EsU0FBU0o7Z0JBQU1LLFFBQVE7WUFBZTtRQUNuRTtRQUVGYixVQUFVRSxPQUFPTixPQUFPLENBQUMsQ0FBQ0MsSUFBT0EsRUFBRUMsTUFBTSxLQUFLLGNBQWM7Z0JBQUNELEVBQUVFLEtBQUs7YUFBQyxHQUFHLEVBQUU7SUFDNUU7SUFDQSxPQUFPO1dBQUlOO1dBQVlPO0tBQVE7QUFDakMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zcGFjZS1iaW8ta25vd2xlZGdlLWVuZ2luZS8uL3NyYy9saWIvcmFnL2FnZ3JlZ2F0ZS50cz80Mjc5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHNlYXJjaEFyeGl2IH0gZnJvbSAnLi9hcnhpdic7XG5pbXBvcnQgeyBzZWFyY2hQdWJNZWQgfSBmcm9tICcuL3B1Ym1lZCc7XG5pbXBvcnQgeyBzZWFyY2hDcm9zc1JlZiB9IGZyb20gJy4vY3Jvc3NyZWYnO1xuaW1wb3J0IHsgc2VhcmNoTmFzYSB9IGZyb20gJy4vbmFzYSc7XG5pbXBvcnQgdHlwZSB7IFJhZ0RvYyB9IGZyb20gJy4vdHlwZXMnO1xuXG5mdW5jdGlvbiBzdHJpcEh0bWwoaHRtbDogc3RyaW5nKSB7XG4gIHJldHVybiBodG1sLnJlcGxhY2UoLzxbXj5dKj4vZywgJyAnKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGFnZ3JlZ2F0ZVNlYXJjaChcbiAgcXVlcnk6IHN0cmluZyxcbiAgc291cmNlczogQXJyYXk8J25hc2EnIHwgJ2FyeGl2JyB8ICdwdWJtZWQnIHwgJ2Nyb3NzcmVmJyB8ICd1cmwnPixcbiAgbWF4UGVyU291cmNlID0gMyxcbiAgdXJscz86IHN0cmluZ1tdXG4pOiBQcm9taXNlPFJhZ0RvY1tdPiB7XG4gIGNvbnN0IHRhc2tzOiBQcm9taXNlPFJhZ0RvY1tdPltdID0gW107XG4gIGlmIChzb3VyY2VzLmluY2x1ZGVzKCduYXNhJykpIHRhc2tzLnB1c2goc2VhcmNoTmFzYShxdWVyeSwgbWF4UGVyU291cmNlKSk7XG4gIGlmIChzb3VyY2VzLmluY2x1ZGVzKCdhcnhpdicpKSB0YXNrcy5wdXNoKHNlYXJjaEFyeGl2KHF1ZXJ5LCBtYXhQZXJTb3VyY2UpKTtcbiAgaWYgKHNvdXJjZXMuaW5jbHVkZXMoJ3B1Ym1lZCcpKSB0YXNrcy5wdXNoKHNlYXJjaFB1Yk1lZChxdWVyeSwgbWF4UGVyU291cmNlKSk7XG4gIGlmIChzb3VyY2VzLmluY2x1ZGVzKCdjcm9zc3JlZicpKSB0YXNrcy5wdXNoKHNlYXJjaENyb3NzUmVmKHF1ZXJ5LCBtYXhQZXJTb3VyY2UpKTtcbiAgY29uc3QgcmVzdWx0cyA9IChhd2FpdCBQcm9taXNlLmFsbFNldHRsZWQodGFza3MpKS5mbGF0TWFwKChyKSA9PiAoci5zdGF0dXMgPT09ICdmdWxmaWxsZWQnID8gci52YWx1ZSA6IFtdKSk7XG4gIGxldCB1cmxEb2NzOiBSYWdEb2NbXSA9IFtdO1xuICBpZiAoc291cmNlcy5pbmNsdWRlcygndXJsJykgJiYgdXJscz8ubGVuZ3RoKSB7XG4gICAgY29uc3QgdXJsUmVzID0gYXdhaXQgUHJvbWlzZS5hbGxTZXR0bGVkKFxuICAgICAgdXJscy5tYXAoYXN5bmMgKHUpID0+IHtcbiAgICAgICAgY29uc3QgciA9IGF3YWl0IGZldGNoKHUpO1xuICAgICAgICBjb25zdCB0ID0gYXdhaXQgci50ZXh0KCk7XG4gICAgICAgIGNvbnN0IHNuaXAgPSBzdHJpcEh0bWwodCkuc2xpY2UoMCwgMTAwMCk7XG4gICAgICAgIHJldHVybiB7IHRpdGxlOiB1LCB1cmw6IHUsIHN1bW1hcnk6IHNuaXAsIHNvdXJjZTogJ3VybCcgYXMgY29uc3QgfSBhcyBSYWdEb2M7XG4gICAgICB9KVxuICAgICk7XG4gICAgdXJsRG9jcyA9IHVybFJlcy5mbGF0TWFwKChyKSA9PiAoci5zdGF0dXMgPT09ICdmdWxmaWxsZWQnID8gW3IudmFsdWVdIDogW10pKTtcbiAgfVxuICByZXR1cm4gWy4uLnJlc3VsdHMsIC4uLnVybERvY3NdO1xufVxuIl0sIm5hbWVzIjpbInNlYXJjaEFyeGl2Iiwic2VhcmNoUHViTWVkIiwic2VhcmNoQ3Jvc3NSZWYiLCJzZWFyY2hOYXNhIiwic3RyaXBIdG1sIiwiaHRtbCIsInJlcGxhY2UiLCJhZ2dyZWdhdGVTZWFyY2giLCJxdWVyeSIsInNvdXJjZXMiLCJtYXhQZXJTb3VyY2UiLCJ1cmxzIiwidGFza3MiLCJpbmNsdWRlcyIsInB1c2giLCJyZXN1bHRzIiwiUHJvbWlzZSIsImFsbFNldHRsZWQiLCJmbGF0TWFwIiwiciIsInN0YXR1cyIsInZhbHVlIiwidXJsRG9jcyIsImxlbmd0aCIsInVybFJlcyIsIm1hcCIsInUiLCJmZXRjaCIsInQiLCJ0ZXh0Iiwic25pcCIsInNsaWNlIiwidGl0bGUiLCJ1cmwiLCJzdW1tYXJ5Iiwic291cmNlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/rag/aggregate.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/rag/arxiv.ts":
/*!******************************!*\
  !*** ./src/lib/rag/arxiv.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   searchArxiv: () => (/* binding */ searchArxiv)\n/* harmony export */ });\n/* harmony import */ var xml2js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! xml2js */ \"(rsc)/./node_modules/xml2js/lib/xml2js.js\");\n/* harmony import */ var xml2js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(xml2js__WEBPACK_IMPORTED_MODULE_0__);\n\nasync function searchArxiv(query, maxResults = 5) {\n    const url = `http://export.arxiv.org/api/query?search_query=all:${encodeURIComponent(query)}&start=0&max_results=${maxResults}`;\n    const res = await fetch(url);\n    const xml = await res.text();\n    const parsed = await (0,xml2js__WEBPACK_IMPORTED_MODULE_0__.parseStringPromise)(xml);\n    const entries = parsed.feed?.entry || [];\n    return entries.map((e)=>({\n            title: e.title?.[0]?.trim(),\n            url: e.id?.[0],\n            summary: e.summary?.[0]?.trim(),\n            authors: (e.author || []).map((a)=>a.name?.[0]).filter(Boolean),\n            year: e.published?.[0] ? new Date(e.published[0]).getFullYear() : undefined,\n            source: \"arxiv\"\n        }));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3JhZy9hcnhpdi50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBNEM7QUFHckMsZUFBZUMsWUFBWUMsS0FBYSxFQUFFQyxhQUFhLENBQUM7SUFDN0QsTUFBTUMsTUFBTSxDQUFDLG1EQUFtRCxFQUFFQyxtQkFBbUJILE9BQU8scUJBQXFCLEVBQUVDLFdBQVcsQ0FBQztJQUMvSCxNQUFNRyxNQUFNLE1BQU1DLE1BQU1IO0lBQ3hCLE1BQU1JLE1BQU0sTUFBTUYsSUFBSUcsSUFBSTtJQUMxQixNQUFNQyxTQUFTLE1BQU1WLDBEQUFrQkEsQ0FBQ1E7SUFDeEMsTUFBTUcsVUFBVUQsT0FBT0UsSUFBSSxFQUFFQyxTQUFTLEVBQUU7SUFDeEMsT0FBT0YsUUFBUUcsR0FBRyxDQUFDLENBQUNDLElBQVk7WUFDOUJDLE9BQU9ELEVBQUVDLEtBQUssRUFBRSxDQUFDLEVBQUUsRUFBRUM7WUFDckJiLEtBQUtXLEVBQUVHLEVBQUUsRUFBRSxDQUFDLEVBQUU7WUFDZEMsU0FBU0osRUFBRUksT0FBTyxFQUFFLENBQUMsRUFBRSxFQUFFRjtZQUN6QkcsU0FBUyxDQUFDTCxFQUFFTSxNQUFNLElBQUksRUFBRSxFQUFFUCxHQUFHLENBQUMsQ0FBQ1EsSUFBV0EsRUFBRUMsSUFBSSxFQUFFLENBQUMsRUFBRSxFQUFFQyxNQUFNLENBQUNDO1lBQzlEQyxNQUFNWCxFQUFFWSxTQUFTLEVBQUUsQ0FBQyxFQUFFLEdBQUcsSUFBSUMsS0FBS2IsRUFBRVksU0FBUyxDQUFDLEVBQUUsRUFBRUUsV0FBVyxLQUFLQztZQUNsRUMsUUFBUTtRQUNWO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zcGFjZS1iaW8ta25vd2xlZGdlLWVuZ2luZS8uL3NyYy9saWIvcmFnL2FyeGl2LnRzP2VjOTAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcGFyc2VTdHJpbmdQcm9taXNlIH0gZnJvbSAneG1sMmpzJztcbmltcG9ydCB0eXBlIHsgUmFnRG9jIH0gZnJvbSAnLi90eXBlcyc7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZWFyY2hBcnhpdihxdWVyeTogc3RyaW5nLCBtYXhSZXN1bHRzID0gNSk6IFByb21pc2U8UmFnRG9jW10+IHtcbiAgY29uc3QgdXJsID0gYGh0dHA6Ly9leHBvcnQuYXJ4aXYub3JnL2FwaS9xdWVyeT9zZWFyY2hfcXVlcnk9YWxsOiR7ZW5jb2RlVVJJQ29tcG9uZW50KHF1ZXJ5KX0mc3RhcnQ9MCZtYXhfcmVzdWx0cz0ke21heFJlc3VsdHN9YDtcbiAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2godXJsKTtcbiAgY29uc3QgeG1sID0gYXdhaXQgcmVzLnRleHQoKTtcbiAgY29uc3QgcGFyc2VkID0gYXdhaXQgcGFyc2VTdHJpbmdQcm9taXNlKHhtbCk7XG4gIGNvbnN0IGVudHJpZXMgPSBwYXJzZWQuZmVlZD8uZW50cnkgfHwgW107XG4gIHJldHVybiBlbnRyaWVzLm1hcCgoZTogYW55KSA9PiAoe1xuICAgIHRpdGxlOiBlLnRpdGxlPy5bMF0/LnRyaW0oKSxcbiAgICB1cmw6IGUuaWQ/LlswXSxcbiAgICBzdW1tYXJ5OiBlLnN1bW1hcnk/LlswXT8udHJpbSgpLFxuICAgIGF1dGhvcnM6IChlLmF1dGhvciB8fCBbXSkubWFwKChhOiBhbnkpID0+IGEubmFtZT8uWzBdKS5maWx0ZXIoQm9vbGVhbiksXG4gICAgeWVhcjogZS5wdWJsaXNoZWQ/LlswXSA/IG5ldyBEYXRlKGUucHVibGlzaGVkWzBdKS5nZXRGdWxsWWVhcigpIDogdW5kZWZpbmVkLFxuICAgIHNvdXJjZTogJ2FyeGl2JyxcbiAgfSkpO1xufVxuIl0sIm5hbWVzIjpbInBhcnNlU3RyaW5nUHJvbWlzZSIsInNlYXJjaEFyeGl2IiwicXVlcnkiLCJtYXhSZXN1bHRzIiwidXJsIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwicmVzIiwiZmV0Y2giLCJ4bWwiLCJ0ZXh0IiwicGFyc2VkIiwiZW50cmllcyIsImZlZWQiLCJlbnRyeSIsIm1hcCIsImUiLCJ0aXRsZSIsInRyaW0iLCJpZCIsInN1bW1hcnkiLCJhdXRob3JzIiwiYXV0aG9yIiwiYSIsIm5hbWUiLCJmaWx0ZXIiLCJCb29sZWFuIiwieWVhciIsInB1Ymxpc2hlZCIsIkRhdGUiLCJnZXRGdWxsWWVhciIsInVuZGVmaW5lZCIsInNvdXJjZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/rag/arxiv.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/rag/crossref.ts":
/*!*********************************!*\
  !*** ./src/lib/rag/crossref.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   searchCrossRef: () => (/* binding */ searchCrossRef)\n/* harmony export */ });\nasync function searchCrossRef(query, maxResults = 5) {\n    const url = `https://api.crossref.org/works?query=${encodeURIComponent(query)}&rows=${maxResults}`;\n    const res = await fetch(url, {\n        headers: {\n            Accept: \"application/json\"\n        }\n    });\n    const j = await res.json();\n    const items = j?.message?.items || [];\n    return items.map((it)=>({\n            title: it.title && it.title[0] || \"CrossRef Work\",\n            url: it.URL,\n            authors: (it.author || []).map((a)=>[\n                    a.given,\n                    a.family\n                ].filter(Boolean).join(\" \")).filter(Boolean),\n            year: it.issued?.[\"date-parts\"]?.[0]?.[0],\n            source: \"crossref\",\n            snippet: it[\"container-title\"]?.[0]\n        }));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3JhZy9jcm9zc3JlZi50cyIsIm1hcHBpbmdzIjoiOzs7O0FBRU8sZUFBZUEsZUFBZUMsS0FBYSxFQUFFQyxhQUFhLENBQUM7SUFDaEUsTUFBTUMsTUFBTSxDQUFDLHFDQUFxQyxFQUFFQyxtQkFBbUJILE9BQU8sTUFBTSxFQUFFQyxXQUFXLENBQUM7SUFDbEcsTUFBTUcsTUFBTSxNQUFNQyxNQUFNSCxLQUFLO1FBQUVJLFNBQVM7WUFBRUMsUUFBUTtRQUFtQjtJQUFFO0lBQ3ZFLE1BQU1DLElBQUksTUFBTUosSUFBSUssSUFBSTtJQUN4QixNQUFNQyxRQUFRRixHQUFHRyxTQUFTRCxTQUFTLEVBQUU7SUFDckMsT0FBT0EsTUFBTUUsR0FBRyxDQUFDLENBQUNDLEtBQWE7WUFDN0JDLE9BQU8sR0FBSUEsS0FBSyxJQUFJRCxHQUFHQyxLQUFLLENBQUMsRUFBRSxJQUFLO1lBQ3BDWixLQUFLVyxHQUFHRSxHQUFHO1lBQ1hDLFNBQVMsQ0FBQ0gsR0FBR0ksTUFBTSxJQUFJLEVBQUUsRUFDdEJMLEdBQUcsQ0FBQyxDQUFDTSxJQUFXO29CQUFDQSxFQUFFQyxLQUFLO29CQUFFRCxFQUFFRSxNQUFNO2lCQUFDLENBQUNDLE1BQU0sQ0FBQ0MsU0FBU0MsSUFBSSxDQUFDLE1BQ3pERixNQUFNLENBQUNDO1lBQ1ZFLE1BQU1YLEdBQUdZLE1BQU0sRUFBRSxDQUFDLGFBQWEsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUU7WUFDekNDLFFBQVE7WUFDUkMsU0FBU2QsRUFBRSxDQUFDLGtCQUFrQixFQUFFLENBQUMsRUFBRTtRQUNyQztBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3BhY2UtYmlvLWtub3dsZWRnZS1lbmdpbmUvLi9zcmMvbGliL3JhZy9jcm9zc3JlZi50cz9lYWVlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgUmFnRG9jIH0gZnJvbSAnLi90eXBlcyc7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZWFyY2hDcm9zc1JlZihxdWVyeTogc3RyaW5nLCBtYXhSZXN1bHRzID0gNSk6IFByb21pc2U8UmFnRG9jW10+IHtcbiAgY29uc3QgdXJsID0gYGh0dHBzOi8vYXBpLmNyb3NzcmVmLm9yZy93b3Jrcz9xdWVyeT0ke2VuY29kZVVSSUNvbXBvbmVudChxdWVyeSl9JnJvd3M9JHttYXhSZXN1bHRzfWA7XG4gIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHVybCwgeyBoZWFkZXJzOiB7IEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nIH0gfSk7XG4gIGNvbnN0IGogPSBhd2FpdCByZXMuanNvbigpO1xuICBjb25zdCBpdGVtcyA9IGo/Lm1lc3NhZ2U/Lml0ZW1zIHx8IFtdO1xuICByZXR1cm4gaXRlbXMubWFwKChpdDogYW55KSA9PiAoe1xuICAgIHRpdGxlOiAoaXQudGl0bGUgJiYgaXQudGl0bGVbMF0pIHx8ICdDcm9zc1JlZiBXb3JrJyxcbiAgICB1cmw6IGl0LlVSTCxcbiAgICBhdXRob3JzOiAoaXQuYXV0aG9yIHx8IFtdKVxuICAgICAgLm1hcCgoYTogYW55KSA9PiBbYS5naXZlbiwgYS5mYW1pbHldLmZpbHRlcihCb29sZWFuKS5qb2luKCcgJykpXG4gICAgICAuZmlsdGVyKEJvb2xlYW4pLFxuICAgIHllYXI6IGl0Lmlzc3VlZD8uWydkYXRlLXBhcnRzJ10/LlswXT8uWzBdLFxuICAgIHNvdXJjZTogJ2Nyb3NzcmVmJyxcbiAgICBzbmlwcGV0OiBpdFsnY29udGFpbmVyLXRpdGxlJ10/LlswXSxcbiAgfSkpO1xufVxuIl0sIm5hbWVzIjpbInNlYXJjaENyb3NzUmVmIiwicXVlcnkiLCJtYXhSZXN1bHRzIiwidXJsIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwicmVzIiwiZmV0Y2giLCJoZWFkZXJzIiwiQWNjZXB0IiwiaiIsImpzb24iLCJpdGVtcyIsIm1lc3NhZ2UiLCJtYXAiLCJpdCIsInRpdGxlIiwiVVJMIiwiYXV0aG9ycyIsImF1dGhvciIsImEiLCJnaXZlbiIsImZhbWlseSIsImZpbHRlciIsIkJvb2xlYW4iLCJqb2luIiwieWVhciIsImlzc3VlZCIsInNvdXJjZSIsInNuaXBwZXQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/rag/crossref.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/rag/nasa.ts":
/*!*****************************!*\
  !*** ./src/lib/rag/nasa.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   searchNasa: () => (/* binding */ searchNasa)\n/* harmony export */ });\nasync function searchNasa(query, maxResults = 5) {\n    const key = process.env.NASA_API_KEY || \"DEMO_KEY\";\n    const url = `https://techport.nasa.gov/api/projects/search?searchQuery=${encodeURIComponent(query)}&api_key=${key}`;\n    const res = await fetch(url);\n    if (!res.ok) return [];\n    const j = await res.json();\n    const arr = j?.projects || j?.results || j?.projectSearchResult?.projects || [];\n    const items = Array.isArray(arr) ? arr : arr?.projects || [];\n    const docs = [];\n    for (const p of items.slice(0, maxResults)){\n        const title = p?.title || p?.projectTitle || \"NASA Project\";\n        const id = p?.id || p?.projectId;\n        const desc = p?.description || p?.projectDescription;\n        docs.push({\n            title,\n            url: id ? `https://techport.nasa.gov/view/${id}` : undefined,\n            summary: typeof desc === \"string\" ? desc : undefined,\n            authors: undefined,\n            year: p?.lastUpdated ? new Date(p.lastUpdated).getFullYear() : undefined,\n            source: \"nasa\",\n            snippet: typeof desc === \"string\" ? desc.slice(0, 240) : undefined\n        });\n    }\n    return docs;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3JhZy9uYXNhLnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFFTyxlQUFlQSxXQUFXQyxLQUFhLEVBQUVDLGFBQWEsQ0FBQztJQUM1RCxNQUFNQyxNQUFNQyxRQUFRQyxHQUFHLENBQUNDLFlBQVksSUFBSTtJQUN4QyxNQUFNQyxNQUFNLENBQUMsMERBQTBELEVBQUVDLG1CQUFtQlAsT0FBTyxTQUFTLEVBQUVFLElBQUksQ0FBQztJQUNuSCxNQUFNTSxNQUFNLE1BQU1DLE1BQU1IO0lBQ3hCLElBQUksQ0FBQ0UsSUFBSUUsRUFBRSxFQUFFLE9BQU8sRUFBRTtJQUN0QixNQUFNQyxJQUFJLE1BQU1ILElBQUlJLElBQUk7SUFDeEIsTUFBTUMsTUFBTUYsR0FBR0csWUFBWUgsR0FBR0ksV0FBV0osR0FBR0sscUJBQXFCRixZQUFZLEVBQUU7SUFDL0UsTUFBTUcsUUFBUUMsTUFBTUMsT0FBTyxDQUFDTixPQUFPQSxNQUFNQSxLQUFLQyxZQUFZLEVBQUU7SUFDNUQsTUFBTU0sT0FBaUIsRUFBRTtJQUN6QixLQUFLLE1BQU1DLEtBQUtKLE1BQU1LLEtBQUssQ0FBQyxHQUFHckIsWUFBYTtRQUMxQyxNQUFNc0IsUUFBUUYsR0FBR0UsU0FBU0YsR0FBR0csZ0JBQWdCO1FBQzdDLE1BQU1DLEtBQUtKLEdBQUdJLE1BQU1KLEdBQUdLO1FBQ3ZCLE1BQU1DLE9BQU9OLEdBQUdPLGVBQWVQLEdBQUdRO1FBQ2xDVCxLQUFLVSxJQUFJLENBQUM7WUFDUlA7WUFDQWpCLEtBQUttQixLQUFLLENBQUMsK0JBQStCLEVBQUVBLEdBQUcsQ0FBQyxHQUFHTTtZQUNuREMsU0FBUyxPQUFPTCxTQUFTLFdBQVdBLE9BQU9JO1lBQzNDRSxTQUFTRjtZQUNURyxNQUFNYixHQUFHYyxjQUFjLElBQUlDLEtBQUtmLEVBQUVjLFdBQVcsRUFBRUUsV0FBVyxLQUFLTjtZQUMvRE8sUUFBUTtZQUNSQyxTQUFTLE9BQU9aLFNBQVMsV0FBV0EsS0FBS0wsS0FBSyxDQUFDLEdBQUcsT0FBT1M7UUFDM0Q7SUFDRjtJQUNBLE9BQU9YO0FBQ1QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zcGFjZS1iaW8ta25vd2xlZGdlLWVuZ2luZS8uL3NyYy9saWIvcmFnL25hc2EudHM/OWJhYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IFJhZ0RvYyB9IGZyb20gJy4vdHlwZXMnO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2VhcmNoTmFzYShxdWVyeTogc3RyaW5nLCBtYXhSZXN1bHRzID0gNSk6IFByb21pc2U8UmFnRG9jW10+IHtcbiAgY29uc3Qga2V5ID0gcHJvY2Vzcy5lbnYuTkFTQV9BUElfS0VZIHx8ICdERU1PX0tFWSc7XG4gIGNvbnN0IHVybCA9IGBodHRwczovL3RlY2hwb3J0Lm5hc2EuZ292L2FwaS9wcm9qZWN0cy9zZWFyY2g/c2VhcmNoUXVlcnk9JHtlbmNvZGVVUklDb21wb25lbnQocXVlcnkpfSZhcGlfa2V5PSR7a2V5fWA7XG4gIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHVybCk7XG4gIGlmICghcmVzLm9rKSByZXR1cm4gW107XG4gIGNvbnN0IGogPSBhd2FpdCByZXMuanNvbigpO1xuICBjb25zdCBhcnIgPSBqPy5wcm9qZWN0cyB8fCBqPy5yZXN1bHRzIHx8IGo/LnByb2plY3RTZWFyY2hSZXN1bHQ/LnByb2plY3RzIHx8IFtdO1xuICBjb25zdCBpdGVtcyA9IEFycmF5LmlzQXJyYXkoYXJyKSA/IGFyciA6IGFycj8ucHJvamVjdHMgfHwgW107XG4gIGNvbnN0IGRvY3M6IFJhZ0RvY1tdID0gW107XG4gIGZvciAoY29uc3QgcCBvZiBpdGVtcy5zbGljZSgwLCBtYXhSZXN1bHRzKSkge1xuICAgIGNvbnN0IHRpdGxlID0gcD8udGl0bGUgfHwgcD8ucHJvamVjdFRpdGxlIHx8ICdOQVNBIFByb2plY3QnO1xuICAgIGNvbnN0IGlkID0gcD8uaWQgfHwgcD8ucHJvamVjdElkO1xuICAgIGNvbnN0IGRlc2MgPSBwPy5kZXNjcmlwdGlvbiB8fCBwPy5wcm9qZWN0RGVzY3JpcHRpb247XG4gICAgZG9jcy5wdXNoKHtcbiAgICAgIHRpdGxlLFxuICAgICAgdXJsOiBpZCA/IGBodHRwczovL3RlY2hwb3J0Lm5hc2EuZ292L3ZpZXcvJHtpZH1gIDogdW5kZWZpbmVkLFxuICAgICAgc3VtbWFyeTogdHlwZW9mIGRlc2MgPT09ICdzdHJpbmcnID8gZGVzYyA6IHVuZGVmaW5lZCxcbiAgICAgIGF1dGhvcnM6IHVuZGVmaW5lZCxcbiAgICAgIHllYXI6IHA/Lmxhc3RVcGRhdGVkID8gbmV3IERhdGUocC5sYXN0VXBkYXRlZCkuZ2V0RnVsbFllYXIoKSA6IHVuZGVmaW5lZCxcbiAgICAgIHNvdXJjZTogJ25hc2EnLFxuICAgICAgc25pcHBldDogdHlwZW9mIGRlc2MgPT09ICdzdHJpbmcnID8gZGVzYy5zbGljZSgwLCAyNDApIDogdW5kZWZpbmVkLFxuICAgIH0pO1xuICB9XG4gIHJldHVybiBkb2NzO1xufVxuIl0sIm5hbWVzIjpbInNlYXJjaE5hc2EiLCJxdWVyeSIsIm1heFJlc3VsdHMiLCJrZXkiLCJwcm9jZXNzIiwiZW52IiwiTkFTQV9BUElfS0VZIiwidXJsIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwicmVzIiwiZmV0Y2giLCJvayIsImoiLCJqc29uIiwiYXJyIiwicHJvamVjdHMiLCJyZXN1bHRzIiwicHJvamVjdFNlYXJjaFJlc3VsdCIsIml0ZW1zIiwiQXJyYXkiLCJpc0FycmF5IiwiZG9jcyIsInAiLCJzbGljZSIsInRpdGxlIiwicHJvamVjdFRpdGxlIiwiaWQiLCJwcm9qZWN0SWQiLCJkZXNjIiwiZGVzY3JpcHRpb24iLCJwcm9qZWN0RGVzY3JpcHRpb24iLCJwdXNoIiwidW5kZWZpbmVkIiwic3VtbWFyeSIsImF1dGhvcnMiLCJ5ZWFyIiwibGFzdFVwZGF0ZWQiLCJEYXRlIiwiZ2V0RnVsbFllYXIiLCJzb3VyY2UiLCJzbmlwcGV0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/rag/nasa.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/rag/pubmed.ts":
/*!*******************************!*\
  !*** ./src/lib/rag/pubmed.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   searchPubMed: () => (/* binding */ searchPubMed)\n/* harmony export */ });\nasync function searchPubMed(query, maxResults = 5) {\n    const esearchUrl = `https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esearch.fcgi?db=pubmed&term=${encodeURIComponent(query)}&retmax=${maxResults}&retmode=json`;\n    const es = await fetch(esearchUrl);\n    const esj = await es.json();\n    const ids = (esj?.esearchresult?.idlist || []).join(\",\");\n    if (!ids) return [];\n    const esumUrl = `https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esummary.fcgi?db=pubmed&id=${ids}&retmode=json`;\n    const sm = await fetch(esumUrl);\n    const smj = await sm.json();\n    const result = [];\n    const uids = smj?.result?.uids || [];\n    for (const uid of uids){\n        const item = smj.result[uid];\n        result.push({\n            title: item?.title || \"PubMed article\",\n            url: `https://pubmed.ncbi.nlm.nih.gov/${uid}/`,\n            authors: (item?.authors || []).map((a)=>a.name).filter(Boolean),\n            year: item?.pubdate ? parseInt(String(item.pubdate).slice(0, 4)) : undefined,\n            source: \"pubmed\",\n            snippet: item?.sortfirstauthor || undefined\n        });\n    }\n    return result;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3JhZy9wdWJtZWQudHMiLCJtYXBwaW5ncyI6Ijs7OztBQUVPLGVBQWVBLGFBQWFDLEtBQWEsRUFBRUMsYUFBYSxDQUFDO0lBQzlELE1BQU1DLGFBQWEsQ0FBQywwRUFBMEUsRUFBRUMsbUJBQzlGSCxPQUNBLFFBQVEsRUFBRUMsV0FBVyxhQUFhLENBQUM7SUFDckMsTUFBTUcsS0FBSyxNQUFNQyxNQUFNSDtJQUN2QixNQUFNSSxNQUFNLE1BQU1GLEdBQUdHLElBQUk7SUFDekIsTUFBTUMsTUFBTSxDQUFDRixLQUFLRyxlQUFlQyxVQUFVLEVBQUUsRUFBRUMsSUFBSSxDQUFDO0lBQ3BELElBQUksQ0FBQ0gsS0FBSyxPQUFPLEVBQUU7SUFDbkIsTUFBTUksVUFBVSxDQUFDLHlFQUF5RSxFQUFFSixJQUFJLGFBQWEsQ0FBQztJQUM5RyxNQUFNSyxLQUFLLE1BQU1SLE1BQU1PO0lBQ3ZCLE1BQU1FLE1BQU0sTUFBTUQsR0FBR04sSUFBSTtJQUN6QixNQUFNUSxTQUFtQixFQUFFO0lBQzNCLE1BQU1DLE9BQWlCRixLQUFLQyxRQUFRQyxRQUFRLEVBQUU7SUFDOUMsS0FBSyxNQUFNQyxPQUFPRCxLQUFNO1FBQ3RCLE1BQU1FLE9BQU9KLElBQUlDLE1BQU0sQ0FBQ0UsSUFBSTtRQUM1QkYsT0FBT0ksSUFBSSxDQUFDO1lBQ1ZDLE9BQU9GLE1BQU1FLFNBQVM7WUFDdEJDLEtBQUssQ0FBQyxnQ0FBZ0MsRUFBRUosSUFBSSxDQUFDLENBQUM7WUFDOUNLLFNBQVMsQ0FBQ0osTUFBTUksV0FBVyxFQUFFLEVBQUVDLEdBQUcsQ0FBQyxDQUFDQyxJQUFXQSxFQUFFQyxJQUFJLEVBQUVDLE1BQU0sQ0FBQ0M7WUFDOURDLE1BQU1WLE1BQU1XLFVBQVVDLFNBQVNDLE9BQU9iLEtBQUtXLE9BQU8sRUFBRUcsS0FBSyxDQUFDLEdBQUcsTUFBTUM7WUFDbkVDLFFBQVE7WUFDUkMsU0FBU2pCLE1BQU1rQixtQkFBbUJIO1FBQ3BDO0lBQ0Y7SUFDQSxPQUFPbEI7QUFDVCIsInNvdXJjZXMiOlsid2VicGFjazovL3NwYWNlLWJpby1rbm93bGVkZ2UtZW5naW5lLy4vc3JjL2xpYi9yYWcvcHVibWVkLnRzP2MyNzgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBSYWdEb2MgfSBmcm9tICcuL3R5cGVzJztcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlYXJjaFB1Yk1lZChxdWVyeTogc3RyaW5nLCBtYXhSZXN1bHRzID0gNSk6IFByb21pc2U8UmFnRG9jW10+IHtcbiAgY29uc3QgZXNlYXJjaFVybCA9IGBodHRwczovL2V1dGlscy5uY2JpLm5sbS5uaWguZ292L2VudHJlei9ldXRpbHMvZXNlYXJjaC5mY2dpP2RiPXB1Ym1lZCZ0ZXJtPSR7ZW5jb2RlVVJJQ29tcG9uZW50KFxuICAgIHF1ZXJ5XG4gICl9JnJldG1heD0ke21heFJlc3VsdHN9JnJldG1vZGU9anNvbmA7XG4gIGNvbnN0IGVzID0gYXdhaXQgZmV0Y2goZXNlYXJjaFVybCk7XG4gIGNvbnN0IGVzaiA9IGF3YWl0IGVzLmpzb24oKTtcbiAgY29uc3QgaWRzID0gKGVzaj8uZXNlYXJjaHJlc3VsdD8uaWRsaXN0IHx8IFtdKS5qb2luKCcsJyk7XG4gIGlmICghaWRzKSByZXR1cm4gW107XG4gIGNvbnN0IGVzdW1VcmwgPSBgaHR0cHM6Ly9ldXRpbHMubmNiaS5ubG0ubmloLmdvdi9lbnRyZXovZXV0aWxzL2VzdW1tYXJ5LmZjZ2k/ZGI9cHVibWVkJmlkPSR7aWRzfSZyZXRtb2RlPWpzb25gO1xuICBjb25zdCBzbSA9IGF3YWl0IGZldGNoKGVzdW1VcmwpO1xuICBjb25zdCBzbWogPSBhd2FpdCBzbS5qc29uKCk7XG4gIGNvbnN0IHJlc3VsdDogUmFnRG9jW10gPSBbXTtcbiAgY29uc3QgdWlkczogc3RyaW5nW10gPSBzbWo/LnJlc3VsdD8udWlkcyB8fCBbXTtcbiAgZm9yIChjb25zdCB1aWQgb2YgdWlkcykge1xuICAgIGNvbnN0IGl0ZW0gPSBzbWoucmVzdWx0W3VpZF07XG4gICAgcmVzdWx0LnB1c2goe1xuICAgICAgdGl0bGU6IGl0ZW0/LnRpdGxlIHx8ICdQdWJNZWQgYXJ0aWNsZScsXG4gICAgICB1cmw6IGBodHRwczovL3B1Ym1lZC5uY2JpLm5sbS5uaWguZ292LyR7dWlkfS9gLFxuICAgICAgYXV0aG9yczogKGl0ZW0/LmF1dGhvcnMgfHwgW10pLm1hcCgoYTogYW55KSA9PiBhLm5hbWUpLmZpbHRlcihCb29sZWFuKSxcbiAgICAgIHllYXI6IGl0ZW0/LnB1YmRhdGUgPyBwYXJzZUludChTdHJpbmcoaXRlbS5wdWJkYXRlKS5zbGljZSgwLCA0KSkgOiB1bmRlZmluZWQsXG4gICAgICBzb3VyY2U6ICdwdWJtZWQnLFxuICAgICAgc25pcHBldDogaXRlbT8uc29ydGZpcnN0YXV0aG9yIHx8IHVuZGVmaW5lZCxcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuIl0sIm5hbWVzIjpbInNlYXJjaFB1Yk1lZCIsInF1ZXJ5IiwibWF4UmVzdWx0cyIsImVzZWFyY2hVcmwiLCJlbmNvZGVVUklDb21wb25lbnQiLCJlcyIsImZldGNoIiwiZXNqIiwianNvbiIsImlkcyIsImVzZWFyY2hyZXN1bHQiLCJpZGxpc3QiLCJqb2luIiwiZXN1bVVybCIsInNtIiwic21qIiwicmVzdWx0IiwidWlkcyIsInVpZCIsIml0ZW0iLCJwdXNoIiwidGl0bGUiLCJ1cmwiLCJhdXRob3JzIiwibWFwIiwiYSIsIm5hbWUiLCJmaWx0ZXIiLCJCb29sZWFuIiwieWVhciIsInB1YmRhdGUiLCJwYXJzZUludCIsIlN0cmluZyIsInNsaWNlIiwidW5kZWZpbmVkIiwic291cmNlIiwic25pcHBldCIsInNvcnRmaXJzdGF1dGhvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/rag/pubmed.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/xmlbuilder","vendor-chunks/xml2js","vendor-chunks/sax"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fchat%2Froute&page=%2Fapi%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Froute.ts&appDir=%2FUsers%2Fyelugodlashivaraj%2FCascadeProjects%2Fnasa-space-biology-engine%2Fai-backend%2Fsrc%2Fcontrollers%2Fnasa.intercollege1%2Fnasa%20mvp%2Fnasa_MVP1%2Fspace-bio-knowledge-engine%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fyelugodlashivaraj%2FCascadeProjects%2Fnasa-space-biology-engine%2Fai-backend%2Fsrc%2Fcontrollers%2Fnasa.intercollege1%2Fnasa%20mvp%2Fnasa_MVP1%2Fspace-bio-knowledge-engine&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();